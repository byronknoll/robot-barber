# Shortest length sequence.
# https://github.com/byronknoll/robot-barber

import requests
import argparse
import time
import json

commands = [
['{"T":122,"b":0,"s":-1.42,"e":2,"h":1.5,"spd":10,"acc":10}',1],
['{"T":122,"b":1,"s":-1.42,"e":1.28,"h":2,"spd":10,"acc":10}',4],
['{"T":122,"b":1,"s":-1.18,"e":1.28,"h":2.7,"spd":10,"acc":10}',4],
['{"T":122,"b":1,"s":-1.08,"e":1.12,"h":3.1,"spd":10,"acc":10}',4],
['{"T":122,"b":1,"s":-1.28,"e":1.28,"h":3.1,"spd":10,"acc":10}',2],
['{"T":122,"b":1,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',2],
['{"T":122,"b":1.2,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',4],
['{"T":122,"b":1.4,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":1.6,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":1.8,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":1.8,"s":-1.17,"e":0.95,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":1.8,"s":-0.99,"e":1.02,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":1.8,"s":-1.1,"e":1,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":1.8,"s":-1.0,"e":1,"h":3.14,"spd":10,"acc":10}',1.5],
['{"T":122,"b":1.8,"s":-0.82,"e":0.6,"h":3.14,"spd":10,"acc":10}',2.5],
['{"T":122,"b":1.8,"s":-0.71,"e":0.63,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":1.8,"s":-0.7,"e":0.4,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":1.8,"s":-0.55,"e":0.4,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":2.2,"s":-0.55,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":2.6,"s":-0.55,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":3,"s":-0.55,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":0,"s":-1.42,"e":2,"h":1.5,"spd":10,"acc":10}',18],
['{"T":122,"b":-1.2,"s":-1.42,"e":1.28,"h":2,"spd":10,"acc":10}',4],
['{"T":122,"b":-1.2,"s":-1.18,"e":1.28,"h":2.7,"spd":10,"acc":10}',4],
['{"T":122,"b":-1.2,"s":-1.06,"e":1.12,"h":3.1,"spd":10,"acc":10}',4],
['{"T":122,"b":-1.2,"s":-1.28,"e":1.28,"h":3.1,"spd":10,"acc":10}',2],
['{"T":122,"b":-1.2,"s":-1.16,"e":1.3,"h":3.1,"spd":10,"acc":10}',2],
['{"T":122,"b":-1.4,"s":-1.16,"e":1.3,"h":3.1,"spd":10,"acc":10}',4],
['{"T":122,"b":-1.6,"s":-1.16,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":-1.8,"s":-1.16,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":-2,"s":-1.18,"e":1.3,"h":3.1,"spd":10,"acc":10}',3],
['{"T":122,"b":-2,"s":-1.17,"e":0.95,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":-2,"s":-0.99,"e":1.02,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":-2,"s":-1.1,"e":1,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":-2,"s":-1.0,"e":1,"h":3.14,"spd":10,"acc":10}',1.5],
['{"T":122,"b":-2,"s":-0.82,"e":0.6,"h":3.14,"spd":10,"acc":10}',2.5],
['{"T":122,"b":-2,"s":-0.71,"e":0.63,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":-2,"s":-0.7,"e":0.4,"h":3.14,"spd":10,"acc":10}',2],
['{"T":122,"b":-2,"s":-0.57,"e":0.4,"h":3.14,"spd":10,"acc":10}',4],
['{"T":122,"b":-2.4,"s":-0.57,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":-2.7,"s":-0.57,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":-3,"s":-0.57,"e":0.4,"h":3.14,"spd":10,"acc":10}',3],
['{"T":122,"b":-0,"s":-1.42,"e":2,"h":1.5,"spd":10,"acc":10}',10],
]

def main():
    parser = argparse.ArgumentParser(description='Http JSON Communication')
    parser.add_argument('ip', type=str, help='IP address: 192.168.10.104')

    args = parser.parse_args()

    ip_addr = args.ip

    try:
        for command in commands:
            data = json.loads(command[0])
            if ("b" in data):
            	data["b"] *= 57.2958
            	data["s"] *= 57.2958
            	data["e"] *= 57.2958
            	data["h"] *= 57.2958
            command[0] = json.dumps(data)
            print(command[0])
            url = "http://" + ip_addr + "/js?json=" + command[0]
            response = requests.get(url)
            content = response.text
            print(content)
            time.sleep(command[1])
    except KeyboardInterrupt:
        pass


if __name__ == "__main__":
    main()
